# 21110757, Võ Cẩm Chương
# Firewall task submission
## a. Setup rules on router to block all access into it except ping.

We open the command prompt and use __docker ps__ to view the running containers
<img width="720" alt="pic1" src="https://github.com/ExoCryptic/firewall/blob/3d43f3b6c228fa4134b0dda412a3b256cf2a7ab7/asset/pic1_1.png?raw=true">
<br>Access to the router container.
<br>This container is where we work on
<br>Firstly, we need to delete all previous rules in this router. We use:
<br>__iptables -F
<br>iptables -X__
<br>And then we check the router rules:
<br>__iptables -S__
<br>
<img width="480" src="https://github.com/ExoCryptic/firewall/blob/main/asset/pic2.png?raw=true">
<br>We can see that __INPUT__ is in __ACCEPT__. We need to change it using:
<br>__iptables -P INPUT DROP__
<br>Then we allow ping by using: 
<br>__iptables -A INPUT -p icmp --icmp-type echo-request -j ACCEPT__
<br>Now we use the __Outsider__ machine to ping the __router__ machine:
<br>__ping 10.9.0.254__
<br>
<img width="480" src="https://github.com/ExoCryptic/firewall/blob/29054cd61490f92389a8926ee5233e8d6ebfd651/asset/pic5.png?raw=true">
<br>We can see the ping works
<br>Now we curl by using:
<br>__curl http://10.9.0.254__
<br>
<img width="680" src="https://github.com/ExoCryptic/firewall/blob/29054cd61490f92389a8926ee5233e8d6ebfd651/asset/pic4.png?raw=true">
<br>The result we got meaning that the rules we applied the __router__ blocks all access into it except ping.
## b. Setup rules on router to prevent computers on subnet 10.9.0.0/24 from accessing the internal web server (iweb).
We need to block http, https port from computers on subnet 10.9.0.0/24 by using the following commands:</span><br>
__iptables -A OUTPUT -d 172.217.25.14 -p tcp --dport 80 -j REJECT<br>iptables -A OUTPUT -d 172.217.25.14 -p tcp --dport 443 -j REJECT__
<br>Now, when we curl iweb http://172.16.10.110 on the __outsider__ machine, we are unable to access it:
<img width="726" src="https://github.com/ExoCryptic/firewall/blob/0d532b5e77a7df0f7acf1449dd3ab6a36bc9f1de/asset/pic6.png?raw=true">
## c. The badsite was found to contain malwares and source of delivering bots. Setup rules on router to stop computers on subnet 172.16.10.0/24 from accessing the badsite.
In order to prevent machines on the subnet __172.16.10.0/24__ from accessing the __badsite__. We use the following commands: 
__iptables -A FORWARD -s 127.16.10.0/24 -d 10.9.0.10 -p tcp --dport 80 -j DROP<br>
iptables -A FORWARD -s 127.16.10.0/24 -d 10.9.0.10 -p tcp --dport 443 -j DROP__
<br>If we try to curl badsite http://10.9.0.10 on the __inner__ machine. We are unable to access:
<img width="726" alt="Screenshot 2023-05-02 165125" src="https://github.com/ExoCryptic/firewall/blob/3d153b6d160aa2e9243b38ae47e8464b20049413/asset/pic7.png?raw=true">
